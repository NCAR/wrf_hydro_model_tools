README - NLDAS2 forcing data regridding scripts for WRF-Hydro


PURPOSE

Scripts to regrid NLDAS2 forcing data to a WRF-Hydro domain using the ESMF
regridding functions within the NCAR Command Language (NCL). 

Created by: K. Ikeda, NCAR/RAL
Updated: 7/22/2017     K. FitzGerald & M. McAllister, NCAR/RAL
Updated: 3/17/2018     K. FitzGerald, NCAR/RAL

SOFTWARE REQUIREMENTS

NCAR Command Language (NCL) version 6.1.0 or later

DATA ACQUISITION

Acquire NLDAS2 forcing data from NASA's data server: 
https://hydro1.gesdisc.eosdis.nasa.gov/data/NLDAS/NLDAS_FORA0125_H.002/
See the following site for information on how to access data:
https://disc.gsfc.nasa.gov/data-access 
See the following instructions for how to download data files using wget:
https://disc.gsfc.nasa.gov/information/howto?title=How%20to%20Download%20Data%20Files%20from%20HTTP%20Service%20with%20wget
 
REGRIDDING

The process to utilize ESMF regridding tools within the NCL programming language
is a 2 step process. 

The steps are as follows:

1. Create regridding 'weight' files required by the ESMF regridders. The weight
   files are netCDF files which specify interpolation weights between the source
   coordinate data grids (src) and destination coordinate data (dst) grids. The 
   weight file is generated by running the 'NLDAS2WRFHydro_generate_weights.ncl' 
   script. Users will need to provide the source and destination grid filenames 
   as arguments to the script.


2. The second step is to then do the regridding using the 
   'NLDAS2WRFHydro_regrid.ncl' script which ingests both source data and the 
   relevant weight file as inputs and then outputs regridded data on the 
   destination grid.

Thus the 2 scripts used to do the regridding are:

NLDAS2WRFHydro_generate_weights.ncl

and

NLDAS2WRFHydro_regrid.ncl

Input file requirements: 
1. A geogrid file (geo_em.d0x.nc) for your 'destination' domain (WRF-Hydro grid)

2. NLDAS2 forcing data (this contains the 'source' domain or grid)  

The NLDAS2 forcing data fields used by WRF-Hydro / the regridding scripts are:

"lat_110"   - latitude
"lon_110"   - longitude
"PRES_110_SFC"   - pressure
"TMP_110_HTGL"   - air temperature
"U_GRD_110_HTGL" - wind speed - u direction
"V_GRD_110_HTGL" - wind speed - v direction
"SPF_H_110_HTGL" - specific humidity 
"A_PCP_110_SFC_acc1h" - accumulated precipitation
"DSWRF_110_SFC" - incoming shortwave radiation
"DLWRF_110_SFC" -incoming longwave radiation

Additional specific usage information for these scripts is provided in the
header of the script codes.

################################################################################
Running 'NLDAS2WRFHydro_generate_weights.ncl':
################################################################################
NOTES on the use of 'NLDAS2WRFHydro_generate_weights.ncl':
1. This script may take a while to run. 
2. Note that runtime increases with larger domain sizes and higher resolution.

Example Usage    : ncl 'interp_opt="bilinear"' 'srcGridName="input_files/NLDAS_FORA0125_H.A20170101.0000.002.grb"' 'dstGridName="geo_em.d01.nc"' NLDAS2WRFHydro_generate_weights.ncl

           interp_opt = conserve / bilinear 
           srcGridName = name of file that contains source grid
           dstGridName = name of file that contains the destination (WRF-Hydro)
                         grid


################################################################################
Running 'NLDAS2WRFHydro_regrid.ncl':
################################################################################
NOTES on the use of NLDAS2WRFHydro_regrid.ncl:
1. This script will use the regridding weight files created by the 
   'NLDAS2WRFHydro_generate_weights.ncl' script. Therefore, do not change the
   names of those files or else this script will not be able to find them.
2. The source data to be regridded (NLDAS2 forcing data with the default 
   filenames) needs to be placed in a local directory called 'input_files/'
3. The output data created from this script will be placed in a local directory
   called 'output_files/'. If this directory is not present the script will
   create it.

Example Usage   : ncl 'srcFileName="NLDAS_FORA0125_H.*"' 'dstGridName="geo_em.d01.nc"' NLDAS2WRFHydro_regrid.ncl

          srcFileName = filename pattern of the souce NLDAS files.
                        e.g., "NLDAS_FORA0125_H.2013091300.grb",
                        "NLDAS_FORA0125_H.*.grb" , ...
          dstGridName = name of file that contains the destination (WRF-Hydro)
                        grid


